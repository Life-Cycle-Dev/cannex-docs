---
icon: code
layout:
  width: default
  title:
    visible: true
  description:
    visible: true
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
  metadata:
    visible: true
---

# Deployment Guide

## Hardware and software requirements <a href="#hardware-and-software-requirements" id="hardware-and-software-requirements"></a>

* [Node.js](https://nodejs.org/): Only [Active LTS or Maintenance LTS versions](https://nodejs.org/en/about/previous-releases) are supported (currently `v20` and `v22`). Odd-number releases of Node, known as "current" versions of Node.js, are not supported (e.g. v21, v23).
* Your preferred Node.js package manager:
  * [npm](https://docs.npmjs.com/cli/v6/commands/npm-install) (`v6` and above)
  * [yarn](https://yarnpkg.com/getting-started/install)
  * [pnpm](https://pnpm.io/)
* A supported database version:
  * PostgreSQL Minimum 12.0 (Recommended 14.0)

## Environment Variable

### Server Configuration

<table><thead><tr><th width="211.23828125">Key</th><th>Description</th></tr></thead><tbody><tr><td>HOST</td><td>Defines the network interface where the Strapi server will run.<br>Example: <code>0.0.0.0</code> allows the server to accept connections from any IP.</td></tr><tr><td>PORT</td><td><p>Port number on which Strapi will listen for incoming HTTP requests. </p><p>Example: <code>1337</code>.</p></td></tr></tbody></table>



### Security & Secrets

These values are auto-generated by Strapi and **must be kept private**. They are essential for authentication, session management, and data encryption.

<table><thead><tr><th width="226.984375">Key</th><th>Description</th></tr></thead><tbody><tr><td>APP_KEYS</td><td>A set of random keys used internally by Strapi for signing cookies and securing sessions. Must be a comma-separated list.</td></tr><tr><td>API_TOKEN_SALT</td><td>Salt used when hashing API tokens. Provides additional entropy to secure tokens.</td></tr><tr><td>ADMIN_JWT_SECRET</td><td>Secret key used for generating and verifying JWTs for Strapi Admin users.</td></tr><tr><td>TRANSFER_TOKEN_SALT</td><td>Salt used when generating tokens for Strapiâ€™s data transfer operations.</td></tr><tr><td>ENCRYPTION_KEY</td><td>Key used to encrypt sensitive data at rest (e.g., stored credentials or plugin secrets).</td></tr><tr><td>JWT_SECRET</td><td>Secret used for generating and validating JWTs for public API authentication.</td></tr></tbody></table>



### Database Configuration

<table><thead><tr><th width="225.15625">Key</th><th>Description</th></tr></thead><tbody><tr><td>DATABASE_CLIENT</td><td>Fixed to <code>postgres</code></td></tr><tr><td>DATABASE_HOST</td><td>Hostname or IP of the database server.<br>Example: <code>localhost</code>.</td></tr><tr><td>DATABASE_PORT</td><td>TCP port for the database server.<br>Default for PostgreSQL: <code>5432</code>.</td></tr><tr><td>DATABASE_NAME</td><td>Name of the Strapi database schema.<br>Example: <code>cannex</code>.</td></tr><tr><td>DATABASE_USERNAME</td><td>Database user with sufficient permissions.<br>Example: <code>root</code>.</td></tr><tr><td>DATABASE_PASSWORD</td><td>Password for the database user.</td></tr><tr><td>DATABASE_SSL</td><td>Enables SSL/TLS connection to the database.<br>Values: <code>true</code> or <code>false</code>.</td></tr></tbody></table>



### Upload Provider Configuration

| Key              | Description                                   |
| ---------------- | --------------------------------------------- |
| UPLOAD\_PROVIDER | Upload provider config (`local` or `s3` only) |



### S3 Storage Configuration

Used for storing uploaded media files in an S3-compatible storage (e.g., AWS S3, Cloudflare R2, MinIO) **not require if UPLOAD\_PROVIDER = local**.

<table><thead><tr><th width="220.1796875">Key</th><th>Description</th></tr></thead><tbody><tr><td>S3_PUBLIC_URL</td><td>Public base URL used by Strapi to serve uploaded files.<br>Example: <code>http://localhost:9000/cannex</code>.</td></tr><tr><td>S3_ROOT_PATH</td><td>Root folder inside the bucket where files will be stored.<br>Example: <code>uploader</code>.</td></tr><tr><td>S3_ENDPOINT</td><td>Endpoint of the S3 service (e.g., AWS S3 URL or MinIO local URL).</td></tr><tr><td>S3_ACCESS_KEY_ID</td><td>Access key ID for authentication to the S3 service.</td></tr><tr><td>S3_ACCESS_SECRET</td><td>Secret key for authentication to the S3 service.</td></tr><tr><td>S3_REGION</td><td>AWS region of the bucket (e.g., <code>us-east-1</code>). Required for AWS, but often ignored in local S3-compatible storage.</td></tr><tr><td>S3_ACL</td><td>Default ACL (Access Control List) for uploaded files.<br>Example: <code>public-read</code>.</td></tr><tr><td>S3_BUCKET</td><td>Name of the bucket where files will be stored.<br>Example: <code>cannex</code>.</td></tr></tbody></table>



### Email Configuration

Defines SMTP settings used by Strapi to send emails.

<table><thead><tr><th width="234.6328125">Key</th><th>Descrription</th></tr></thead><tbody><tr><td>SMTP_HOST</td><td>SMTP server hostname.<br>Example: <code>smtp.gmail.com</code>.</td></tr><tr><td>SMTP_PORT</td><td>Port for the SMTP service (commonly <code>465</code> for SSL, <code>587</code> for TLS).</td></tr><tr><td>SMTP_SECURE</td><td>Whether to use a secure connection (SSL/TLS).<br>Example: <code>true</code>.</td></tr><tr><td>SMTP_USERNAME</td><td>SMTP account username (usually the email address).</td></tr><tr><td>SMTP_PASSWORD</td><td>Password or app-specific password for the SMTP account.</td></tr><tr><td>SMTP_REJECT_UNAUTH</td><td>Whether to reject unauthorized connections. Helps enforce strict security.<br>Example: <code>true</code>.</td></tr><tr><td>SMTP_DEFAULT_FROM</td><td>Default From address used in outgoing emails.<br>Example: <code>noreply@cannex.com</code>.</td></tr><tr><td>SMTP_DEFAULT_REPLYTO</td><td>Default Reply-To address used in outgoing emails.<br>Example: <code>support@cannex.com</code>.</td></tr></tbody></table>



### Example .env

```shell

# Server
HOST=0.0.0.0
PORT=1337

# Secrets
APP_KEYS=nqL1YEfZpac34V6hSk6c3w==,KR/qSz1TL3eH2eGAWCARKQ==,mrfLyzMMDCigVOjYHGtxdQ==,MIYVcLs9SF3w1hw6u+QF4g==
API_TOKEN_SALT=Qh6flWaAM7IDsTWmNoVOxg==
ADMIN_JWT_SECRET=Iu+YQWiCRB4geEhc6qz0fw==
TRANSFER_TOKEN_SALT=SuNLWEjX5iDsm7V5eCXxnA==
ENCRYPTION_KEY=bj1Wd+56mQ1HlxVrhW9VbA==
JWT_SECRET=4nb9SK2dI4nw08CO7TyaBA==

# Database
DATABASE_CLIENT=postgres
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=
DATABASE_USERNAME=root
DATABASE_PASSWORD=root
DATABASE_SSL=false

# Upload
UPLOAD_PROVIDER=s3 # s3 or local

# S3 storage config
# require if UPLOAD_PROVIDER == s3 not require if UPLOAD_PROVIDER == local
S3_PUBLIC_URL=http://localhost:9000/cannex
S3_ROOT_PATH=uploader
S3_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY_ID=admin
S3_ACCESS_SECRET=admin123
S3_REGION=us-east-1
S3_ACL=public-read
S3_BUCKET=cannex

# Email config
SMTP_HOST=smtp.gmail.com
SMTP_PORT=465
SMTP_SECURE=true
SMTP_USERNAME=hunter.application.sup@gmail.com
SMTP_PASSWORD=thisispassword
SMTP_REJECT_UNAUTH=true
SMTP_DEFAULT_FROM=hunter.application.sup@gmail.com
SMTP_DEFAULT_REPLYTO=hunter.application.sup@gmail.com

# Frontend Config
CLIENT_URL=http://localhost:3000

```



## Deploy with node.js runtime

You need to install [Node.js](https://nodejs.org/) in Virtual Machine and set your enivironment variable in Virtual Machine or create `.env` in root project path

* Install dependencies

```
1: ðŸ“„ yarn install

-- or --

1: ðŸ“„ npm install
```

* Build your project

```
1: ðŸ“„ yarn build

-- or --

1: ðŸ“„ npm run build
```

* Start your project

```
1: ðŸ“„ yarn start

-- or --

1: ðŸ“„ npm start
```



## Deploy with docker

You need to install docker service in Virtual Machine

* Create `.env`  in root project path and set your environment variable
* Build your image

```
1: ðŸ“„ docker build -t cannex-backend .
```

* Start the container

```
1: ðŸ“„ docker run -d \
    --name cannex-backend \
    --env-file .env \
    -p 1337:1337 \
    -v $(pwd)/public/uploads:/app/public/uploads \
    cannex-backend
```

## Deploy with docker compose

You need to install docker and docker compose service in Virtual Machine

* Create `.env`  in root project path and set your environment variable
* Build and start  container

```
1: ðŸ“„ docker compose up -d
```





